generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "sqlite"
    url      = env("DATABASE_URL")
}

model Estoque {
    codigo     Int            @id @default(autoincrement())
    nome       String
    quantidade Int
    createdAt  DateTime       @default(now())
    ordens     OrdemProduto[]
}

model Ordem_Servico {
    os       Int    @id @default(autoincrement())
    cliente  String
    telefone String
    valor    Int

    produtos OrdemProduto[]
}

model OrdemProduto {
    ordemId    Int
    produtoId  Int
    quantidade Int

    ordem   Ordem_Servico @relation(fields: [ordemId], references: [os])
    produto Estoque       @relation(fields: [produtoId], references: [codigo])

    @@id([ordemId, produtoId]) // Chave composta para garantir que cada combinação ordem-produto seja única
}
